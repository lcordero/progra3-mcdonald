<div id="main-container">
    <head style ="width:100%">Mac</head>
    <br>
    <br>
    <button>Menu</button>
    <input class="prod_name" placeholder="ProductName">
    <input class="prod_price" placeholder="ProductPrice">
    <input class="prod_cantidad" placeholder="ProductCantidad">
    <button class="send">Enviar</button>
    <button style="border-radius: 5px;">
        <nav><a style=" text-decoration: none;" href="product2.html">Cocina</a></nav>
    </button>
    <table style="width:100%" class="data_table">
        <thead class="header">
            <tr>
              <th>ProdName</th>
              <th>ProdPrice</th>
              <th>ProdCantidad</th>
            </tr>
        </thead>
      <tbody class="table_content">
      </tbody>
    </table>
  </div>


<script src="/assets/jquery.js"></script>
<script src="/assets/socket.io.js"></script>
<script>
    var table_content = $(".table_content")
    var send_content = $(".send")
    var input_content = $(':input')

    
    var socket = io.connect(window.location.host);
    socket.on('connect', function() {
        console.log('connect');
    });

    socket.on('new_product', function(product) {
        if (!product.name || !product.price || !product.cantidad) return
        table_content.append(`
            <tr>
            <th>`+ product.name +`</th>
            <th>`+ product.price +`</th>
            <th>`+ Product.cantidad +`</th>
            </tr>
            
        `)
    });

    socket.on('disconnect', function(){
        console.log('Desconectado');
    });

    send_content.on("click", function(){
        socket.emit('new_product', {
            'name': $(".prod_name").val(), 
            'price': $(".prod_price").val(),
            'cantidad': $(".prod_cantidad").val()
        });

        $.post("http://localhost:3001/api/product",{
            name: $(".prod_name").val(),
            price: $(".prod_price").val(),
            cantidad: $(".prod_cantidad").val()
        });

        input_content.val('');
    
    })


    var load_content = function(url){
        $.get( url, function( data ) {
            table_content.empty()
            $.each( data.products, function( i, product ) {
                table_content.append(`
                    <tr>
                    <th>`+ product.name +`</th>
                    <th>`+ product.price +`</th>
                    <th>`+ Product.cantidad +`</th>
                    </tr>
                    
                `)
            })
        })
    }

    
</script>